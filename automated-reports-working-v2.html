<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automated Reports - AI PPM Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f1f5f9;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
        }

        .report-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .report-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px 30px;
        }

        .report-controls {
            background: #f8fafc;
            padding: 20px 30px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .report-type-selector {
            display: flex;
            gap: 8px;
        }

        .report-type-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--dark);
        }

        .report-type-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .report-actions {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            padding: 10px 16px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            color: #64748b;
        }

        .action-btn:hover {
            background: var(--light);
            color: var(--dark);
        }

        .action-btn.primary {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .action-btn.primary:hover {
            background: var(--primary-dark);
        }

        .report-content {
            padding: 30px;
        }

        .report-summary {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .summary-card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .summary-label {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .summary-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
        }

        .summary-change {
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 4px;
        }

        .positive { color: var(--success); }
        .negative { color: var(--danger); }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .chart-options {
            display: flex;
            gap: 8px;
        }

        .chart-option {
            padding: 6px 12px;
            background: var(--light);
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .chart-option:hover {
            background: #e2e8f0;
        }

        .data-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .data-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--light);
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: var(--dark);
            font-size: 14px;
        }

        .data-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #f1f5f9;
            font-size: 14px;
        }

        .data-table tr:hover {
            background: #f8fafc;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-on-track {
            background: #dcfce7;
            color: var(--success);
        }

        .status-at-risk {
            background: #fef3c7;
            color: var(--warning);
        }

        .status-delayed {
            background: #fee2e2;
            color: var(--danger);
        }

        .status-completed {
            background: #dbeafe;
            color: #3b82f6;
        }

        .ai-insights {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .insight-title {
            font-size: 20px;
            font-weight: 600;
        }

        .insight-list {
            space-y: 12px;
        }

        .insight-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .insight-type {
            font-size: 12px;
            font-weight: 600;
            opacity: 0.8;
            margin-bottom: 4px;
        }

        .insight-text {
            font-size: 14px;
            line-height: 1.4;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--light);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .filter-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .filter-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .filter-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
        }

        .filter-input {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }
    </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <div class="min-h-screen bg-gray-50">
        <!-- Header -->
        <div class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <button onclick="window.history.back()" class="mr-4 text-gray-500 hover:text-gray-700">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h1 class="text-xl font-semibold text-gray-900">Automated Reports</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button onclick="scheduleReport()" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-clock"></i> Schedule
                        </button>
                        <button onclick="shareReport()" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-share"></i> Share
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Report Controls -->
            <div class="report-controls">
                <div class="report-type-selector">
                    <button class="report-type-btn active" onclick="generateReport('executive', this)">Executive</button>
                    <button class="report-type-btn" onclick="generateReport('progress', this)">Progress</button>
                    <button class="report-type-btn" onclick="generateReport('financial', this)">Financial</button>
                    <button class="report-type-btn" onclick="generateReport('resource', this)">Resource</button>
                    <button class="report-type-btn" onclick="generateReport('risk', this)">Risk</button>
                    <button class="report-type-btn" onclick="generateReport('custom', this)">Custom</button>
                </div>
                <div class="report-actions">
                    <button class="action-btn" onclick="refreshData()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="action-btn primary" onclick="exportReport()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>

            <!-- Filter Section -->
            <div class="filter-section">
                <div class="filter-group">
                    <div class="filter-item">
                        <label class="filter-label">Date Range</label>
                        <select class="filter-select" id="dateRange" onchange="updateReport()">
                            <option value="7">Last 7 Days</option>
                            <option value="30" selected>Last 30 Days</option>
                            <option value="90">Last 90 Days</option>
                            <option value="365">Last Year</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label class="filter-label">Portfolio</label>
                        <select class="filter-select" id="portfolio" onchange="updateReport()">
                            <option value="all">All Portfolios</option>
                            <option value="digital">Digital Transformation</option>
                            <option value="product">Product Development</option>
                            <option value="marketing">Marketing Campaigns</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label class="filter-label">Project Status</label>
                        <select class="filter-select" id="status" onchange="updateReport()">
                            <option value="all">All Status</option>
                            <option value="active">Active</option>
                            <option value="completed">Completed</option>
                            <option value="delayed">Delayed</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Report Content -->
            <div class="report-container">
                <!-- Report Header -->
                <div class="report-header">
                    <div>
                        <h2 class="text-2xl font-bold mb-2" id="reportTitle">Executive Dashboard Report</h2>
                        <p class="opacity-90" id="reportSubtitle">Generated on <span id="reportDate"></span> â€¢ AI-Powered Insights</p>
                    </div>
                    <div class="text-right">
                        <div class="text-sm opacity-80">Report ID</div>
                        <div class="font-mono" id="reportId">#RPT-2024-001</div>
                    </div>
                </div>

                <!-- Report Content -->
                <div class="report-content" id="reportContent">
                    <!-- Dynamic content will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample project data
        const projectData = {
            executive: {
                summary: {
                    totalProjects: 24,
                    activeProjects: 18,
                    completedProjects: 5,
                    delayedProjects: 1,
                    totalBudget: 2500000,
                    spentBudget: 1850000,
                    teamSize: 156,
                    averageCompletion: 67
                },
                insights: [
                    {
                        type: "PERFORMANCE",
                        text: "Portfolio performance is 15% above target with 4 projects completing ahead of schedule. Resource utilization has improved by 8% this month."
                    },
                    {
                        type: "RISK ALERT", 
                        text: "Website Redesign project shows 78% probability of delay. Recommend adding 2 developers or extending timeline by 3 weeks."
                    },
                    {
                        type: "OPPORTUNITY",
                        text: "Mobile App Development is under budget by $45K. Consider reallocating resources to accelerate E-commerce Platform."
                    }
                ]
            },
            progress: {
                summary: {
                    onTrack: 12,
                    atRisk: 4,
                    delayed: 2,
                    completed: 6,
                    tasksCompleted: 284,
                    totalTasks: 412,
                    averageVelocity: 92
                },
                insights: [
                    {
                        type: "MILESTONE",
                        text: "Q1 milestones achieved with 94% success rate. 3 major deliverables completed ahead of schedule."
                    },
                    {
                        type: "BOTTLENECK",
                        text: "Testing phase identified as bottleneck across multiple projects. Consider expanding QA team capacity."
                    }
                ]
            },
            financial: {
                summary: {
                    totalBudget: 2500000,
                    actualSpend: 1850000,
                    projectedSpend: 2350000,
                    costVariance: -150000,
                    roi: 145,
                    budgetUtilization: 74
                },
                insights: [
                    {
                        type: "COST SAVINGS",
                        text: "$150K savings identified through resource optimization. Automation initiatives reduced operational costs by 22%."
                    },
                    {
                        type: "BUDGET ALERT",
                        text: "Marketing Campaign projected to exceed budget by 8%. Recommend reallocating funds from completed projects."
                    }
                ]
            },
            resource: {
                summary: {
                    totalResources: 156,
                    allocatedResources: 142,
                    availableResources: 14,
                    utilization: 91,
                    skillsCoverage: 87,
                    burnoutRisk: 3
                },
                insights: [
                    {
                        type: "OPTIMIZATION",
                        text: "Resource allocation efficiency improved by 23%. Cross-training program shows 45% reduction in skill gaps."
                    },
                    {
                        type: "WORKLOAD",
                        text: "3 team members showing burnout risk signs. Recommend workload redistribution and additional support."
                    }
                ]
            },
            risk: {
                summary: {
                    totalRisks: 18,
                    highRisks: 3,
                    mediumRisks: 8,
                    lowRisks: 7,
                    mitigated: 12,
                    monitoring: 6
                },
                insights: [
                    {
                        type: "PREDICTION",
                        text: "AI models predict 87% probability of meeting Q2 targets despite current challenges in supply chain."
                    },
                    {
                        type: "MITIGATION",
                        text: "Proactive risk mitigation prevented 3 potential delays. Early warning system performing with 92% accuracy."
                    }
                ]
            }
        };

        let currentReportType = 'executive';
        let charts = {};

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            updateReportDate();
            generateReport('executive');
        });

        // Update report date
        function updateReportDate() {
            const date = new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('reportDate').textContent = date;
        }

        // Generate report based on type
        function generateReport(type, buttonElement) {
            currentReportType = type;
            
            // Update active button
            document.querySelectorAll('.report-type-btn').forEach(btn => btn.classList.remove('active'));
            if (buttonElement) {
                buttonElement.classList.add('active');
            }

            // Update report title
            const titles = {
                executive: 'Executive Dashboard Report',
                progress: 'Project Progress Report', 
                financial: 'Financial Performance Report',
                resource: 'Resource Utilization Report',
                risk: 'Risk Assessment Report',
                custom: 'Custom Analysis Report'
            };
            
            document.getElementById('reportTitle').textContent = titles[type];
            generateReportId();

            // Generate content based on type
            const content = document.getElementById('reportContent');
            content.innerHTML = generateReportContent(type);
            
            // Initialize charts after content is rendered
            setTimeout(() => {
                initializeCharts(type);
            }, 100);
        }

        // Generate unique report ID
        function generateReportId() {
            const id = 'RPT-' + new Date().getFullYear() + '-' + 
                       Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            document.getElementById('reportId').textContent = '#' + id;
        }

        // Generate report content
        function generateReportContent(type) {
            const data = projectData[type];
            
            let html = `
                <!-- AI Insights Section -->
                <div class="ai-insights">
                    <div class="insight-header">
                        <i class="fas fa-brain"></i>
                        <span class="insight-title">AI-Powered Insights</span>
                        <span style="margin-left: auto; background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 20px; font-size: 12px;">
                            <i class="fas fa-check"></i> 94% Confidence
                        </span>
                    </div>
                    <div class="insight-list">
                        ${data.insights.map(insight => `
                            <div class="insight-item">
                                <div class="insight-type">${insight.type}</div>
                                <div class="insight-text">${insight.text}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Summary Cards -->
                <div class="report-summary">
                    <h3 class="text-lg font-semibold mb-4">Key Metrics</h3>
                    <div class="summary-grid">
                        ${generateSummaryCards(type, data.summary)}
                    </div>
                </div>
            `;

            // Add specific sections based on report type
            if (type === 'executive') {
                html += generateExecutiveSections();
            } else if (type === 'progress') {
                html += generateProgressSections();
            } else if (type === 'financial') {
                html += generateFinancialSections();
            } else if (type === 'resource') {
                html += generateResourceSections();
            } else if (type === 'risk') {
                html += generateRiskSections();
            }

            return html;
        }

        // Generate summary cards
        function generateSummaryCards(type, summary) {
            const cards = {
                executive: [
                    { label: 'Total Projects', value: summary.totalProjects, change: '+12%', positive: true },
                    { label: 'Active Projects', value: summary.activeProjects, change: '+8%', positive: true },
                    { label: 'Team Size', value: summary.teamSize, change: '+15%', positive: true },
                    { label: 'Avg Completion', value: summary.averageCompletion + '%', change: '+5%', positive: true }
                ],
                progress: [
                    { label: 'On Track', value: summary.onTrack, change: '+2', positive: true },
                    { label: 'Tasks Completed', value: summary.tasksCompleted, change: '+28', positive: true },
                    { label: 'Velocity', value: summary.averageVelocity + '%', change: '+7%', positive: true },
                    { label: 'Total Tasks', value: summary.totalTasks, change: '+12', positive: true }
                ],
                financial: [
                    { label: 'Total Budget', value: '$' + (summary.totalBudget / 1000000).toFixed(1) + 'M', change: 'On Target', positive: true },
                    { label: 'Spent', value: '$' + (summary.actualSpend / 1000000).toFixed(1) + 'M', change: '74%', positive: true },
                    { label: 'ROI', value: summary.roi + '%', change: '+23%', positive: true },
                    { label: 'Cost Variance', value: '$' + (summary.costVariance / 1000).toFixed(0) + 'K', change: 'Under Budget', positive: true }
                ],
                resource: [
                    { label: 'Total Resources', value: summary.totalResources, change: '+12', positive: true },
                    { label: 'Utilization', value: summary.utilization + '%', change: '+3%', positive: true },
                    { label: 'Available', value: summary.availableResources, change: 'Balanced', positive: true },
                    { label: 'Skills Coverage', value: summary.skillsCoverage + '%', change: '+8%', positive: true }
                ],
                risk: [
                    { label: 'Total Risks', value: summary.totalRisks, change: '-3', positive: true },
                    { label: 'High Risk', value: summary.highRisks, change: '-1', positive: true },
                    { label: 'Mitigated', value: summary.mitigated, change: '+4', positive: true },
                    { label: 'Monitoring', value: summary.monitoring, change: 'Active', positive: true }
                ]
            };

            return cards[type].map(card => `
                <div class="summary-card">
                    <div class="summary-label">${card.label}</div>
                    <div class="summary-value">${card.value}</div>
                    <div class="summary-change ${card.positive ? 'positive' : 'negative'}">
                        <i class="fas fa-arrow-${card.positive ? 'up' : 'down'}"></i>
                        ${card.change}
                    </div>
                </div>
            `).join('');
        }

        // Generate executive-specific sections
        function generateExecutiveSections() {
            return `
                <!-- Portfolio Performance Chart -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Portfolio Performance Trend</h3>
                        <div class="chart-options">
                            <button class="chart-option">6M</button>
                            <button class="chart-option">1Y</button>
                        </div>
                    </div>
                    <canvas id="performanceChart" height="100"></canvas>
                </div>

                <!-- Project Status Table -->
                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Project Name</th>
                                <th>Status</th>
                                <th>Progress</th>
                                <th>Budget</th>
                                <th>Timeline</th>
                                <th>Team</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Website Redesign</td>
                                <td><span class="status-badge status-at-risk">At Risk</span></td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 78%"></div>
                                    </div>
                                </td>
                                <td>$450K</td>
                                <td>Apr 15</td>
                                <td>12 members</td>
                            </tr>
                            <tr>
                                <td>Mobile App Development</td>
                                <td><span class="status-badge status-on-track">On Track</span></td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 85%"></div>
                                    </div>
                                </td>
                                <td>$680K</td>
                                <td>May 30</td>
                                <td>18 members</td>
                            </tr>
                            <tr>
                                <td>E-commerce Platform</td>
                                <td><span class="status-badge status-on-track">On Track</span></td>
                                <td>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 62%"></div>
                                    </div>
                                </td>
                                <td>$890K</td>
                                <td>Jun 20</td>
                                <td>24 members</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
        }

        // Generate progress-specific sections
        function generateProgressSections() {
            return `
                <!-- Velocity Chart -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Team Velocity</h3>
                    </div>
                    <canvas id="velocityChart" height="100"></canvas>
                </div>

                <!-- Sprint Progress -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Sprint Progress</h3>
                    </div>
                    <canvas id="sprintChart" height="100"></canvas>
                </div>
            `;
        }

        // Generate financial-specific sections
        function generateFinancialSections() {
            return `
                <!-- Budget Overview -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Budget Overview</h3>
                    </div>
                    <canvas id="budgetChart" height="100"></canvas>
                </div>

                <!-- ROI Analysis -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ROI by Project</h3>
                    </div>
                    <canvas id="roiChart" height="100"></canvas>
                </div>
            `;
        }

        // Generate resource-specific sections
        function generateResourceSections() {
            return `
                <!-- Resource Utilization -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Resource Utilization</h3>
                    </div>
                    <canvas id="utilizationChart" height="100"></canvas>
                </div>

                <!-- Skills Matrix -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Skills Coverage</h3>
                    </div>
                    <canvas id="skillsChart" height="100"></canvas>
                </div>
            `;
        }

        // Generate risk-specific sections
        function generateRiskSections() {
            return `
                <!-- Risk Distribution -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Risk Distribution</h3>
                    </div>
                    <canvas id="riskChart" height="100"></canvas>
                </div>

                <!-- Risk Trends -->
                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Risk Description</th>
                                <th>Category</th>
                                <th>Impact</th>
                                <th>Probability</th>
                                <th>Mitigation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Timeline delay in Website Redesign</td>
                                <td>Schedule</td>
                                <td>High</td>
                                <td>78%</td>
                                <td>Add resources</td>
                            </tr>
                            <tr>
                                <td>Budget overrun in Marketing Campaign</td>
                                <td>Financial</td>
                                <td>Medium</td>
                                <td>65%</td>
                                <td>Reallocate funds</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
        }

        // Initialize charts
        function initializeCharts(type) {
            // Destroy existing charts
            Object.values(charts).forEach(chart => {
                if (chart) chart.destroy();
            });

            if (type === 'executive') {
                charts.performance = new Chart(document.getElementById('performanceChart'), {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Completed Projects',
                            data: [3, 5, 4, 7, 6, 8],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'On Track',
                            data: [4, 6, 8, 6, 9, 7],
                            borderColor: '#6366f1',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            } else if (type === 'financial') {
                charts.budget = new Chart(document.getElementById('budgetChart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Spent', 'Remaining', 'Projected'],
                        datasets: [{
                            data: [1850000, 650000, 500000],
                            backgroundColor: ['#ef4444', '#f59e0b', '#6366f1']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            } else if (type === 'resource') {
                charts.utilization = new Chart(document.getElementById('utilizationChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Development', 'Design', 'QA', 'DevOps', 'Management'],
                        datasets: [{
                            label: 'Utilization %',
                            data: [92, 88, 95, 78, 85],
                            backgroundColor: '#6366f1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            } else if (type === 'risk') {
                charts.risk = new Chart(document.getElementById('riskChart'), {
                    type: 'pie',
                    data: {
                        labels: ['High Risk', 'Medium Risk', 'Low Risk', 'Mitigated'],
                        datasets: [{
                            data: [3, 8, 7, 12],
                            backgroundColor: ['#ef4444', '#f59e0b', '#10b981', '#6366f1']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            }
        }

        // Update report based on filters
        function updateReport() {
            generateReport(currentReportType);
        }

        // Refresh data
        function refreshData() {
            const btn = event.target.closest('.action-btn');
            const icon = btn.querySelector('i');
            icon.classList.add('fa-spin');
            
            setTimeout(() => {
                generateReport(currentReportType);
                icon.classList.remove('fa-spin');
            }, 1500);
        }

        // Export report
        function exportReport() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add title
            doc.setFontSize(20);
            doc.text(document.getElementById('reportTitle').textContent, 20, 20);
            
            // Add date
            doc.setFontSize(12);
            doc.text(document.getElementById('reportDate').textContent, 20, 30);
            
            // Add content (simplified)
            doc.setFontSize(10);
            const content = document.querySelector('.ai-insights').textContent;
            const lines = doc.splitTextToSize(content, 170);
            doc.text(lines, 20, 40);
            
            // Save PDF
            doc.save('report.pdf');
        }

        // Schedule report
        function scheduleReport() {
            alert('Report scheduling feature coming soon!');
        }

        // Share report
        function shareReport() {
            if (navigator.share) {
                navigator.share({
                    title: document.getElementById('reportTitle').textContent,
                    text: 'Check out this automated report',
                    url: window.location.href
                });
            } else {
                alert('Link copied to clipboard!');
            }
        }
    </script>
</body>
</html>